<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
			
		<style>
			body{padding: 0;margin: 0;font-family: "微软雅黑";}
			.wrap,.sel_ban,.ban_quankuan_wrap{width: 100%;max-width: 640px;margin: auto;padding-top:20px;;font-family:"微软雅黑",Verdana, Arial, Helvetica, sans-serif;  ;}
			
			.dk{margin-bottom: 30px;position: relative;}
			.dk input[type="text"]{width: 26%;margin: 0px 5px;outline: none;text-align: center;background-color: white;}
			.dk select{min-width: 29%;text-align: center;outline: none;}
			.dk{background-color: rgb(245,245,245);}
			.dk span:first-child{display: inline-block; padding: 15px 0;;width: 28%;text-align: center;background-color: rgb(220,220,220);}
			.dk_wrap div{display: inline-block;font-size: 14px;color: rgb(93,93,93);}
			.one{margin-left: 28%;width:30%;text-align: center;}
			.two{width: 35%;text-align: center;}
			.bor_red{border:1px solid rgb(47,167,225);padding:5px 0px;}
			.noBor{border:none;background-color: rgb(245,245,245)!important;}
			.color_Red{color:red;position: absolute;right: 10px;bottom: -20px;}
			.equ{position: absolute;right: 15px;top:15px;}
			.active{display: none;}
			.sel_ban button{background-color: darkorange;border: none;color: white;padding: 8px 15px;outline: none;}
			.other-dk{display: inline;}
			.other-dk-text{position: absolute;top: 14px;display: none;left: 61%;}
		</style>
	</head>
	<body>
		<div class="wrap">
			<div class="dk_wrap">
				<div class="one">销售价格</div>
				<div class="two">贷款比例</div>
			</div>
			<div class="dk" style="position: relative;">
				<span>贷款金额:</span>
				<input type="text" placeholder="销售价格" id="sh_price" class="bor_red"/> <div class="other-dk" id="other_dk">*</div>
				<input type="text" placeholder="贷款金额" class="other-dk-text bor_red" id='other_dk_text'/>
				<select id="daikuan_blsel" class="bor_red">
					<option>0.5</option>
					<option>0.6</option>
					<option>0.7</option>
					<option>0.8</option>
					<option>其他</option>
				</select> <span class="equ">=</span>
				<span id="daikuan_price" class="color_Red"></span>
			</div>
			
			
			<div class="dk_wrap">
				<div class="one">销售价格</div>
				<div class="two">贷款金额</div>
			</div>
			<div class="dk">
				<span>首付金额:</span>
				<input type="text"  readonly="true" class="sh_price noBor"/> -
				<input type="text"  readonly="true" class="dk_price noBor"/> 
				<span class="equ">=</span>
				<span id="shoufu_price" class="color_Red"></span>
			</div>
			
			
			<div class="dk_wrap active">
				<div class="one">销售价格</div>
				<div class="two">固定比例</div>
			</div>
			<div class="dk active">
				<span>购置税:</span>
				<input type="text"  readonly="true" class="sh_price noBor"/> /
				<select id="gzs_sel" class="bor_red">
					<option>11.7</option>
					<option>11.7*0.75</option>
				</select> <span class="equ">=</span>
				<span id="gzs_price" class="color_Red"></span>
			</div>
			
			
			<div class="dk_wrap active">
				<div class="one">贷款金额</div>
				<div class="two">固定比例</div>
			</div>
			<div class="dk active">
				<span>金融服务费:</span>
				<input type="text"  readonly="true" class="dk_price noBor"/> *
				<span style="display:inline-block;width:27%;text-align: center;padding: 0 5px;">0.05</span> 
				<span class="equ">=</span>
				<span id="jingrong_price" class="color_Red"></span>
			</div>
			
			<div class="dk active">
				<span>装潢:</span>
				<input type="text" placeholder="装潢" id="zhuanhuang_price_text" class="bor_red" onkeyup="other_price()"/> 
			</div>
			<div class="dk active">
				<span>续保金:</span>
				<input type="text" placeholder="续保金" id="xubaojin_price_text" class="bor_red" onkeyup="other_price()"/> 
			</div>
			<div class="dk active">
				<span>保险:</span>
				<input type="text" placeholder="保险" id="baoxian_price_text" class="bor_red" onkeyup="other_price()"/> 
			</div>
			
			<div class="dk active">
				<span>抵押费:</span>
				<input type="text" placeholder="抵押费" id="diya_price_text" class="bor_red" onkeyup="other_price()"/> 
			</div>
			<div class="dk active">
				<span>上牌:</span>
				<input type="text" placeholder="上牌" id="shangpai_price_Text" class="bor_red" onkeyup="other_price()"/>
			</div>
			
			<div class="dk">
				<span>期数:</span> 
				<select id="no_qishu" class="bor_red">
					<option>12</option>
					<option>18</option>
					<option>24</option>
					<option>36</option>
					<option>48</option>
				</select>
			</div>
			<div class="dk_wrap active">
				<div class="one">贷款金额</div>
				<div class="two">利息</div>
			</div>
			<div class="dk active">
				<span>月息:</span>
				<input type="text"  readonly="true" class="dk_price noBor"/> * 
				<input type="text" placeholder="利息" value="0.0032" id="lilv" class="bor_red"/>
				<span class="equ">=</span>
				<span id="yuexi_price" class="color_Red"></span>
			</div>
			<div class="dk_wrap">
				<div class="one" style="width: 20%;">贷款金额</div>
				<div class="two" style="width: 20%;">期数</div>
				<div class="two" style="width: 20%;">月息</div>
			</div>
			<div class="dk">
				<span>月供:</span>
				<input type="text"  readonly="true" class="dk_price noBor" style="width: 15%;"/> / 
				<input type="text"  value="12" readonly="true" id="yuegong_qishu" class="noBor" style="width: 16%;"/> +
				<input type="text"  readonly="true" id="yuegong_yuexi" class="noBor" style="width: 10%;"/> 
				<span class="equ">=</span> 
				<span id="yuegong" class="color_Red"></span>
			</div>
			<div class="dk">
				<span>总首付:</span>
				
				<span id="tal_price" class="" style="color: red;"></span>
			</div>
			
			<!--全款版-->
			
			
		</div>
		<div class="ban_quankuan_wrap" style="display: none;">
				<div class="dk">
					<span>销售价:</span>
					<input type="text" placeholder="销售价格" class="bor_red" id="qk_price" 
						onkeyup="total()"/>
					<span class="" style="color: red;"></span>
				</div>
				<div class="dk">
					<span>购置税:</span>
					<input type="text"  readonly="true" class="sh_price noBor" id='qk_qzstext'/> /
					<select class="bor_red" id="qk_gzssel" onchange="total()">
						<option>11.7</option>
						<option>11.7*0.75</option>
					</select> <span class="equ">=</span>
					<span class="color_Red" id='fr_gzs_value'></span>
				</div>
				<div class="dk">
					<span>保险:</span>
					<input type="text" placeholder="保险" class="bor_red" id='qk_bx' onkeyup="total()"/>
					
				</div>
				<div class="dk">
					<span>上牌:</span>
					<input type="text" placeholder="上牌" class="bor_red" id='qk_sp' onkeyup="total()"/>
					
				</div>
				<div class="dk">
					<span>居住证:</span>
					<input type="text" placeholder="居住证" class="bor_red" id='qk_jzz' onkeyup="total()"/>
					
				</div>
				<div class="dk">
					<span>装潢:</span>
					<input type="text" placeholder="装潢" class="bor_red" id='qk_zh' onkeyup="total()"/>
					
				</div>
				<div class="dk">
					<span>费用总计:</span>
					<span class="" style="color: red;" id='qk_zfy'></span>
				</div>
			</div>
			<div class="sel_ban dk" style="background: #fff;">
				<button id="ban_jd" onclick="btnChange(this.id)">精简版</button>
				<button id="ban_info" onclick="btnChange(this.id)">详情版</button>
				<button id="ban_quankuan" onclick="btnChange(this.id)">全款版</button>
			</div>
			
			
			<script>
			
			function total(){
				var qk_price = document.getElementById('qk_price')//销售价格
				var qk_qzstext = document.getElementById('qk_qzstext');//购置税text
				var qk_gzssel = document.getElementById('qk_gzssel');//购置税选择框;
				var qk_bx = document.getElementById('qk_bx');//保险text;
				var qk_sp = document.getElementById('qk_sp');//上牌text;
				var qk_jzz = document.getElementById('qk_jzz');//居住证text;
				var qk_zh = document.getElementById('qk_zh');//装潢text；
				var qk_zfy = document.getElementById('qk_zfy');//总费用；
				var fr_gzs_value = document.getElementById('fr_gzs_value');
				
				qk_qzstext.value=qk_price.value;
				
				var gzsValue = '';
				var gzsPrice = qk_gzssel.value;
				if(gzsPrice.length>5){
					var splPrice=gzsPrice.split('*');
					gzsValue = Math.ceil((qk_price.value*1/splPrice[0]*splPrice[1])*100)/100;
				}else{
					gzsValue = Math.ceil(((qk_price.value*1)/(gzsPrice*1))*100)/100;
				}
				fr_gzs_value.innerHTML=gzsValue;
				qk_zfy.innerHTML = Math.ceil((qk_price.value*1+gzsValue+qk_bx.value*1+qk_sp.value*1+
				qk_jzz.value*1+qk_zh.value*1)*100)/100;
			}
		</script>
			
			
		<script>
//板块切换
function btnChange(id){
	var ban_quankuan_wrap = document.getElementsByClassName('ban_quankuan_wrap')[0];
	var active = document.getElementsByClassName('active');
	var wrap = document.getElementsByClassName("wrap")[0];
	var tdId = document.getElementById(id);
	switch(id){
		//精简版
		case "ban_jd":
		ban_quankuan_wrap.style.display="none";
		wrap.style.display='block';
		for(var i=0 ; i<active.length ; i++){
			active[i].style.display='none';
		}
		i=null;
		break;
		//详情版
		case "ban_info":
		ban_quankuan_wrap.style.display="none";
		wrap.style.display='block';
		for(var i=0 ; i<active.length ; i++){
			active[i].style.display='block';
		}
		break;
		//全款版
		case "ban_quankuan":
		ban_quankuan_wrap.style.display="block";
		wrap.style.display='none';
		break;
		default:alert("aa");
	}
}


//贷款金额
function dkje(je){
	var other_dk = document.getElementById('other_dk').innerHTML;
	if(other_dk=='*'){
		var daikuan_blsel = document.getElementById('daikuan_blsel').value;
		return Math.floor(je*daikuan_blsel/1000)*1000;
	}
	if(other_dk=='-'){
		var other_dk_text = document.getElementById('other_dk_text').value;
		return Math.floor(other_dk_text/1000)*1000;
	}
	
	
}
//首付金额 
function sfje(sf){
	var sh_price = document.getElementById('sh_price');
	var sfprice = dkje(sh_price.value);
	return sf-sfprice;
}
//购置税
function gzs(gz){
	var gzs_sel = document.getElementById('gzs_sel');
	var selVal = gzs_sel.value;
	if(selVal.length>5){
		var arrSel = selVal.split('*');
		return Math.ceil(gz/arrSel[0]*arrSel[1]*100)/100;
	}else{
		return Math.ceil(gz/selVal*100)/100;
	}
	
}
//金融服务费
function jrfwf(){
	var sh_price = document.getElementById('sh_price');
	var sfprice = dkje(sh_price.value);
	if(sfprice*0.05>=5000){
		return 5000;
	}else{
		return Math.ceil(sfprice*0.05*100)/100;
	}
}
//月息
function yx(val){
	if(val==undefined){
		var sh_price = document.getElementById('sh_price');
		var sfprice = dkje(sh_price.value);
		var lilv = document.getElementById('lilv').value;
		return Math.ceil(sfprice*lilv*100)/100;
	}else{
		var sh_price = document.getElementById('sh_price');
		var sfprice = dkje(sh_price.value);
		return Math.ceil(sfprice*val*100)/100;
	}
}
//月供
function yg(val){

	if(val==undefined){
		var no_qishu = document.getElementById('no_qishu').value;//期数
		var sh_price = document.getElementById('sh_price');
		var sfprice = dkje(sh_price.value);
		var mmm = sfprice/no_qishu+yx()
		return Math.ceil(mmm*100)/100;
		
	}else{
		var sh_price = document.getElementById('sh_price');
		var sfprice = dkje(sh_price.value);
		var mmm = sfprice/val+yx();
		return Math.ceil(mmm*100)/100;
	}
}


//贷款金额结果
var daikuan_price = document.getElementById('daikuan_price');
//首付金额结果
var shoufu_price = document.getElementById('shoufu_price')
//购置税
var gzs_price = document.getElementById('gzs_price');
//金融服务费
var jingrong_price = document.getElementById('jingrong_price');
//月息
var yuexi_price = document.getElementById('yuexi_price');
//月供
var yuegong = document.getElementById('yuegong');
//总首付
var tal_price = document.getElementById('tal_price');


function result(){
	var sh_price = document.getElementById('sh_price');
	var priceN = sh_price.value;
	daikuan_price.innerHTML=dkje(priceN);
	shoufu_price.innerHTML = sfje(priceN);
	gzs_price.innerHTML=gzs(priceN);
	jingrong_price.innerHTML=jrfwf();
	yuexi_price.innerHTML = yx();
	yuegong.innerHTML = yg();
	var ss = other_price();
	tal_price.innerHTML = Math.ceil((sfje(priceN)+gzs(priceN)+jrfwf()+ss)*100)/100;
	
	var yuegong_yuexi = document.getElementById('yuegong_yuexi');
	yuegong_yuexi.value = yx();
	
	var sh_price = document.getElementsByClassName('sh_price');
	for(var i=0 ; i<sh_price.length ; i++){
		sh_price[i].value=priceN;
	}
	i=null;
	var dk_price = document.getElementsByClassName("dk_price");
	
	for(var i=0 ; i<dk_price.length ; i++){
		dk_price[i].value=dkje(priceN);
	}
	i=null;
}


//装潢
var zhuanhuang_price_text = document.getElementById('zhuanhuang_price_text');
//续保金
var xubaojin_price_text = document.getElementById('xubaojin_price_text');
//保险
var baoxian_price_text = document.getElementById('baoxian_price_text');
//抵押费
var diya_price_text = document.getElementById('diya_price_text');
//上牌
var shangpai_price_Text = document.getElementById('shangpai_price_Text');

zhuanhuang_price_text.onkeyup = function(){
	result();
}
xubaojin_price_text.onkeyup = function(){
	result();
}
baoxian_price_text.onkeyup = function(){
	result();
}
diya_price_text.onkeyup = function(){
	result();
}
shangpai_price_Text.onkeyup = function(){
	result();
}

//装潢+续保金+保险+抵押费+上牌
function other_price(){
	var ss = zhuanhuang_price_text.value*1+xubaojin_price_text.value*1+baoxian_price_text.value*1
	+diya_price_text.value*1+shangpai_price_Text.value*1;
	return ss;
}

//销售价格输入框
var sh_price = document.getElementById('sh_price');
sh_price.onkeyup = function(){
	result();
}

//贷款比例选项
var daikuan_blsel = document.getElementById('daikuan_blsel');
daikuan_blsel.onchange = function(){
	if(this.value=="其他"){
		this.style.display="none";
		document.getElementById('other_dk').innerHTML='-';
		document.getElementById('other_dk_text').style.display='block';
	}else{
		result();
	}
}

//固定贷款金额
var other_dk_text = document.getElementById('other_dk_text');
other_dk_text.onkeyup = function(){
	result();
}

//购置税比例
var gzs_sel = document.getElementById('gzs_sel');
gzs_sel.onchange = function(){
		result();
}

//期数
var no_qishu = document.getElementById('no_qishu');
no_qishu.onchange = function(){
	var yuegong_qishu = document.getElementById('yuegong_qishu');
	yuegong_qishu.value = this.value;
	yuegong.innerHTML = yg(this.value);
}

//利率改变
var lilv = document.getElementById('lilv');
lilv.onkeyup = function(){
	var yuegong_yuexi = document.getElementById('yuegong_yuexi');
	yuegong_yuexi.value = yx();
	yuexi_price.innerHTML = yx(this.value);
	yuegong.innerHTML=yg();
}
		</script>
	</body>
</html>
