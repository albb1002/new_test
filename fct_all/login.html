<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5shiv.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
<link href="static/h-ui/css/H-ui.min.css" rel="stylesheet" type="text/css" />
<link href="static/h-ui.admin/css/H-ui.login.css" rel="stylesheet" type="text/css" />
<link href="static/h-ui.admin/css/style.css" rel="stylesheet" type="text/css" />
<link href="lib/Hui-iconfont/1.0.8/iconfont.css" rel="stylesheet" type="text/css" />
<!--[if IE 6]>
<script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
    <script src="js/vue.min.js" type="text/javascript"></script>
    <script src="js/vue-resource.min.js" type="text/javascript"></script>
    <style>
        .loginBox{height: auto;padding-bottom: 20px}
        .login_head{font-size: 25px;line-height: 60px;color: #fff}
    </style>
<title>bcf后台管理</title>
    <link href="css/css.css" rel="stylesheet"/>
<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="js/checkcode.js" type="text/javascript"></script>
</head>
<body onload = "createCode()">
<input type="hidden" id="TenantId" name="TenantId" value="" />
<div class="header login_head">区块币后台管理</div>
<div class="loginWraper">
  <div id="loginform" class="loginBox">
      <div class="row cl">
        <label class="form-label col-xs-3"  style="text-align: right"><i class="Hui-iconfont">&#xe60d;</i></label>
        <div class="formControls col-xs-8">
          <input id="user_name" name="account" type="text" placeholder="用户名" class="input-text size-L" >
        </div>
      </div>
        <div class="verifyvt">
            <div id="verifyvt"></div>
        </div>
      <div class="row cl">
        <label class="form-label col-xs-3"  style="text-align: right"><i class="Hui-iconfont">&#xe60e;</i></label>
        <div class="formControls col-xs-8">
          <input id="user_password" name="password" type="password" placeholder="密码" class="input-text size-L">
        </div>
      </div>
        <div class="verifyvt">
            <div id="verifyvt_mima"></div>
        </div>
      <div class="row cl">
        <div class="formControls col-xs-8 col-xs-offset-3">
             <input class="input-text size-L" type="text" placeholder="验证码" id="input"style="width:150px;" autocomplete="off" >
            <input type="button" id="code" onclick="createCode()" style="width:100px;cursor: pointer" title='点击更换验证码' />
        </div>
      </div>
        <div class="verifyvt">
            <div id="verifyvt_yzm"></div>
        </div>

      <div class="row cl">
        <div class="formControls col-xs-8 col-xs-offset-3">
            <input name="" type="button" class="btn btn-success radius size-L" value="&nbsp;登&nbsp;&nbsp;&nbsp;&nbsp;录&nbsp;" onclick="validate()">
            <a href="forgot_password.html">忘记密码</a>
        </div>
      </div>
  </div>
</div>
<div class="footer"></div>
<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script> 
<script type="text/javascript" src="static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="js/md5.min.js"></script>
<script>
    //缓存用户名
    if( sessionStorage.session_name){
        document.getElementById('user_name').value=sessionStorage.session_name;

    }
	document.getElementsByTagName("body")[0].onkeyup=function(){
		 if (event.keyCode==13) {
		validate();
		 	
		 }

	}
    function validate(){
        var inputCode = document.getElementById("input").value.toUpperCase(); //取得输入的验证码并转化为大写
        var verifyvt_yzm = document.getElementById("verifyvt_yzm");



        var verifyvt = document.getElementById("verifyvt")//用户名验证提示信息
        var verifyvt_mima=document.getElementById("verifyvt_mima")//密码提示信息
        var user_name = document.getElementById("user_name").value;//用户名
        var user_password = document.getElementById("user_password").value;//密码
        var user_name_checkcode = /^([a-z]|[A-Z])+([a-z]|[A-Z]|[0-9]){3,17}$/;


        if(user_name==""){
            verifyvt.innerHTML="用户名不能为空";
            return false;
        }else if(!user_name_checkcode.test(user_name)){
            verifyvt.innerHTML="格式不正确！用户名由数字、字母组成，长度为8-18位。且不能为数字开头";
            return false;
        }else{
            verifyvt.innerHTML="";
            if(user_password==""){
                verifyvt_mima.innerHTML="密码不能为空";
                return false
            }else{
                verifyvt_mima.innerHTML="";
                
                if(inputCode.length == "") { //若输入的验证码长度为0
                    //alert("请输入验证码！"); //则弹出请输入验证码
                    verifyvt_yzm.innerHTML="验证码不能为空";
                    return false;
                }else if(inputCode != code ) { //若输入的验证码与产生的验证码不一致时
                    // alert("验证码输入错误！@_@"); //则弹出验证码输入错误

                    createCode();//刷新验证码
                    verifyvt_yzm.innerHTML="验证码输入错误,请重新输入"

                    return false;
                }else { //输入正确时
                    verifyvt_yzm.innerHTML="";
                    sessionStorage.session_name=document.getElementById("user_name").value;
                    var accountVal = document.getElementById("user_name").value;
                    var passwordVal = document.getElementById("user_password").value;
                    var hash_password = md5(passwordVal);
                    Vue.http.options.emulateJSON = true;
                    Vue.http.options.headers = {
                        'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
                    };

                    new Vue({
                        el:"#loginform",
                        data:{
                        	pots:{}
                        },
                        ready:function(){
                            this.$http.post("http://www.qubitrich.com/commen/pc/login",{account:accountVal,password:hash_password}).then(function(res){

                                if(res.data.code=="G0001"){
                                    verifyvt.innerHTML=res.data.message;
                                    return false;
                                }
                                if(res.data.code=="G0002"){
                                    verifyvt_mima.innerHTML=res.data.message;
                                    return false;
                                }
                                if(res.data.code=="0"){
                                	
                                   sessionStorage.account=res.data.result.account;
                                   sessionStorage.password=hash_password;
                                   // console.log(per[0].name);
                                    //console.log(per);
                                   	window.location.href = "index.html";
                                    
                                    
                                    return true;
                                }
                            })
                        }
                    })

                }
            }
        }
    }

</script>



</body>
</html>